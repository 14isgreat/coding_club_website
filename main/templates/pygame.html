{% extends "base.html" %}
{% block content %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pygame</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'django.css' %}">
    <script src="{% static 'code.js' %}"></script>
</head>
<body>
    <header>
        <div class="container">
            <h1>Pygame</h1>
            <p>Game Development Python Library</p>
            <p>Difficulty level: 6/10</p>
        </div>
    </header>

    <h2 class="subheader">What is Pygame?</h2>
    
    <div class="explainer">
        <p>Pygame is a Python library designed for game development. It provides tools to manage game graphics, sound, input handling, and more, making it easier to create 2D games.</p>
        <p>It uses the SDL library under the hood, which is a powerful cross-platform multimedia library.</p>
    </div> 

    <h2 class="subheader">Setting Up</h2>

    <div class="explainer">
        <p>1. Make sure Pygame is installed:</p>
        <div class="code-container">
            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            <code>pip install pygame</code>
        </div>
        <p>2. Create a new file in your <code>coding-club</code> folder, optionally in a subfolder <code>pygame_projects</code>.</p>
        <p>3. Start your file with the following imports:</p>
        <div class="code-container">
            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            <code>import pygame
from pygame.locals import *</code>
        </div>
        <p>4. Initialize Pygame:</p>
        <div class="code-container">
            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            <code>pygame.init()</code>
        </div>
        <p>5. End your file with:</p>
        <div class="code-container">
            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            <code>pygame.quit()</code>
        </div>
    </div>

    <h2 class="subheader">Tutorial: Setting Up a Game Window</h2>

    <div class="explainer">
        <p>1. Create a window to display your game:</p>
        <div class="code-container">
            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            <code>screen = pygame.display.set_mode((800, 600)) # 800x600 window</code>
        </div>
        <p>2. Set a title for your game window:</p>
        <div class="code-container">
            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            <code>pygame.display.set_caption("My First Game")</code>
        </div>
    </div>

    <h2 class="subheader">Tutorial: Event Handling</h2>

    <div class="explainer">
        <p>1. Handle user input (e.g., closing the window):</p>
        <div class="code-container">
            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            <code>running = True
while running:
    for event in pygame.event.get():
        if event.type == QUIT: # Close button pressed
            running = False</code>
        </div>
        <p>2. Add movement controls (arrow keys):</p>
        <div class="code-container">
            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            <code>if event.type == KEYDOWN:
    if event.key == K_UP:
        print("Up arrow pressed")
    elif event.key == K_DOWN:
        print("Down arrow pressed")</code>
        </div>
    </div>

    <h2 class="subheader">Tutorial: Drawing Shapes</h2>

    <div class="explainer">
        <p>1. Draw a rectangle on the screen:</p>
        <div class="code-container">
            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            <code>pygame.draw.rect(screen, (255, 0, 0), (50, 50, 200, 100))</code>
        </div>
        <p>2. Draw a circle:</p>
        <div class="code-container">
            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            <code>pygame.draw.circle(screen, (0, 0, 255), (400, 300), 50)</code>
        </div>
        <p>Don’t forget to refresh the screen to display the shapes:</p>
        <div class="code-container">
            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            <code>pygame.display.flip()</code>
        </div>
    </div>

    <h2 class="subheader">Tutorial: Adding Images</h2>

    <div class="explainer">
        <p>1. Load an image:</p>
        <div class="code-container">
            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            <code>image = pygame.image.load("path/to/image.png")</code>
        </div>
        <p>2. Draw the image on the screen:</p>
        <div class="code-container">
            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            <code>screen.blit(image, (100, 100))</code>
        </div>
        <p>Don’t forget to refresh the screen again:</p>
        <div class="code-container">
            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            <code>pygame.display.flip()</code>
        </div>
    </div>

    <h2 class="subheader">Tutorial: Moving Objects</h2>

    <div class="explainer">
        <p>1. Move an object across the screen:</p>
        <div class="code-container">
            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            <code>x = 0
while running:
    x += 5
    screen.fill((0, 0, 0)) # Clear screen
    pygame.draw.circle(screen, (255, 255, 0), (x, 300), 30)
    pygame.display.flip()</code>
        </div>
        <p>2. Stop when the object leaves the screen:</p>
        <div class="code-container">
            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            <code>if x > 800:
    running = False</code>
        </div>
    </div>

    <h2 class="subheader">Tutorial: Colors and Fonts</h2>

    <div class="explainer">
        <p>1. Change the background color:</p>
        <div class="code-container">
            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            <code>screen.fill((0, 128, 128))</code>
        </div>
        <p>2. Display text on the screen:</p>
        <div class="code-container">
            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            <code>font = pygame.font.Font(None, 36)
text = font.render("Hello, Pygame!", True, (255, 255, 255))
screen.blit(text, (300, 250))</code>
        </div>
    </div>


    <h2 class="subheader">Tutorial: Playing Sounds</h2>

    <div class="explainer">
        <p>1. Load a sound file:</p>
        <div class="code-container">
            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            <code>sound = pygame.mixer.Sound("path/to/sound.wav")</code>
        </div>
        <p>2. Play the sound:</p>
        <div class="code-container">
            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            <code>sound.play()</code>
        </div>
        <p>3. Add background music:</p>
        <div class="code-container">
            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            <code>pygame.mixer.music.load("path/to/music.mp3")
pygame.mixer.music.play(-1) # Loop indefinitely</code>
        </div>
    </div>

    <h2 class="subheader">Tutorial: Collision Detection</h2>

    <div class="explainer">
        <p>1. Use Pygame's Rect object:</p>
        <div class="code-container">
            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            <code>rect1 = pygame.Rect(50, 50, 100, 100)
rect2 = pygame.Rect(120, 80, 100, 100)</code>
        </div>
        <p>2. Check for collisions:</p>
        <div class="code-container">
            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            <code>if rect1.colliderect(rect2):
    print("Collision detected!")</code>
        </div>
    </div>

    <h2 class="subheader">Tutorial: Animations</h2>

    <div class="explainer">
        <p>1. Move an object smoothly across the screen:</p>
        <div class="code-container">
            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            <code>import time
x = 0
while running:
    x += 5
    screen.fill((0, 0, 0))
    pygame.draw.circle(screen, (0, 255, 0), (x, 300), 30)
    pygame.display.flip()
    time.sleep(0.03)</code>
        </div>
        <p>2. Use a sprite sheet for complex animations:</p>
        <div class="code-container">
            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            <code>sprite_sheet = pygame.image.load("path/to/sprite_sheet.png")
frame_width, frame_height = 64, 64
current_frame = 0

while running:
    frame = sprite_sheet.subsurface((current_frame * frame_width, 0, frame_width, frame_height))
    screen.blit(frame, (200, 200))
    pygame.display.flip()
    current_frame = (current_frame + 1) % total_frames</code>
        </div>
    </div>

    <h2 class="subheader">Tutorial: Custom Events</h2>

    <div class="explainer">
        <p>1. Create and post a custom event:</p>
        <div class="code-container">
            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            <code>MY_EVENT = pygame.USEREVENT + 1
pygame.time.set_timer(MY_EVENT, 1000) # Trigger every second</code>
        </div>
        <p>2. Handle the custom event in the event loop:</p>
        <div class="code-container">
            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            <code>for event in pygame.event.get():
    if event.type == MY_EVENT:
        print("Custom event triggered!")</code>
        </div>
    </div>

    <h2 class="subheader">Understanding the Game Loop</h2>
    <div class="explainer">
        <p>Every game requires a loop that constantly updates and draws things to the screen. Here's a basic game loop:</p>
        <div class="code-container">
            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            <code>
import pygame
pygame.init()

screen = pygame.display.set_mode((800, 600))
running = True

while running:
    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            running = False

    screen.fill((0, 0, 0))  # Fill the screen with black
    pygame.display.flip()  # Update the screen

pygame.quit()
            </code>
        </div>
        <p>This loop runs continuously, handling events, updating game elements, and redrawing the screen until the game is exited.</p>
    </div>

    <h2 class="subheader">Handling Keyboard Inputs</h2>

    <div class="explainer">
        <p>Detect key presses and use them to control game objects:</p>
        <img src="{% static 'screenmovement.gif' %}" alt="control game objects">
        <div class="code-container">
            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            <code>
import pygame
pygame.init()

screen = pygame.display.set_mode((800, 600))
clock = pygame.time.Clock()

x, y = 400, 300
speed = 5
running = True

while running:
    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            running = False

    keys = pygame.key.get_pressed()  # Get state of all keys
    if keys[pygame.K_LEFT]:
        x -= speed
    if keys[pygame.K_RIGHT]:
        x += speed
    if keys[pygame.K_UP]:
        y -= speed
    if keys[pygame.K_DOWN]:
        y += speed

    screen.fill((0, 0, 0))
    pygame.draw.rect(screen, (0, 255, 0), pygame.Rect(x, y, 50, 50))
    pygame.display.flip()
    clock.tick(60)

pygame.quit()
            </code>
        </div>
        <p>This example allows the player to move a rectangle on the screen using the arrow keys.</p>
    </div>

    <h2 class="subheader">Using Sprite Groups</h2>
    <div class="explainer">
        <p>Sprites allow for more efficient handling of objects and their behavior. Here’s an example using sprite groups:</p>
        <div class="code-container">
            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            <code>
import pygame
pygame.init()

screen = pygame.display.set_mode((800, 600))
clock = pygame.time.Clock()

class Player(pygame.sprite.Sprite):
    def __init__(self):
        super().__init__()
        self.image = pygame.Surface((50, 50))
        self.image.fill((0, 255, 0))
        self.rect = self.image.get_rect()
        self.rect.x, self.rect.y = 375, 550

    def update(self):
        keys = pygame.key.get_pressed()
        if keys[pygame.K_LEFT]:
            self.rect.x -= 5
        if keys[pygame.K_RIGHT]:
            self.rect.x += 5

player = Player()
all_sprites = pygame.sprite.Group()
all_sprites.add(player)

running = True
while running:
    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            running = False

    all_sprites.update()  # Update all sprites
    screen.fill((0, 0, 0))
    all_sprites.draw(screen)  # Draw all sprites
    pygame.display.flip()
    clock.tick(60)

pygame.quit()
            </code>
        </div>
        <p>Sprites help in organizing and managing your game objects. Here, the player sprite moves left and right within the game loop.</p>
    </div>

    <h2 class="subheader">Creating Menus or UI Elements</h2>
        
    <div class="explainer">
        <p>Menus or UI elements are crucial for games. Here’s an example of a menu where the player has to choose a color for their avatar.</p>
        <img  src="{% static 'gamemenu.png' %}" alt="Snaky Color selection">
        <p>This can be used for Snaky.</p>
        <div class="code-container">
            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            <code>
import pygame, sys
pygame.init()

DISPLAYSURF = pygame.display.set_mode((800, 600))
clock = pygame.time.Clock()

# set up the colors
BLACK =    (  0,   0,   0)
WHITE =    (255, 255, 255)
RED =      (255,   0,   0)
GRAY =     (128, 128, 128)
BORDER =   (128, 150,   0)  # dark green
BODY =     (150, 200, 100)  # green
R_ORAN =   (220,  20,  60)
Y_ORAN =   (240, 128, 128)
R_TURQ =   ( 72, 209, 204)
Y_TURQ =   (175, 238, 238)
R_PURP =   ( 75,   0, 130)
Y_PURP =   (148,   0, 211)
R_YELL =   (189, 183, 107)
Y_YELL =   (240, 230, 140)

def should_pause():
    while True:
        for event in pygame.event.get():
            if event.type == pygame.QUIT:
                pygame.quit()
                sys.exit()
            elif event.type == pygame.KEYDOWN:
                if event.key == pygame.K_SPACE:
                    return

def is_point_inside_triangle(px, py, vertices):
    x1, y1 = vertices[0]
    x2, y2 = vertices[1]
    x3, y3 = vertices[2]

    # Barycentric coordinates
    detT = (y2 - y3) * (x1 - x3) + (x3 - x2) * (y1 - y3)
    alpha = ((y2 - y3) * (px - x3) + (x3 - x2) * (py - y3)) / detT
    beta = ((y3 - y1) * (px - x3) + (x1 - x3) * (py - y3)) / detT
    gamma = 1 - alpha - beta

    return 0 <= alpha <= 1 and 0 <= beta <= 1 and 0 <= gamma <= 1

def start_button():
    fontObj = pygame.font.Font('freesansbold.ttf', 45)        
    textSurfaceObj = fontObj.render(f'Start Game', True, WHITE,BORDER) # for invisible background, leave out ",BLUE" 
    textRectObj = textSurfaceObj.get_rect()
    textRectObj.center = (300,375)
    DISPLAYSURF.blit(textSurfaceObj, textRectObj)
    #pygame.draw.circle(textSurfaceObj,50,[10,9],1,BORDER)
    return textRectObj

def menu():
    DISPLAYSURF.fill((175,238,238)) # Light turquoise

    fontObj = pygame.font.Font('freesansbold.ttf', 50)        
    textSurfaceObj = fontObj.render(f'Snake Color Selection', True, RED,BLACK) # for invisible background, leave out ",BLUE" 
    textRectObj = textSurfaceObj.get_rect()
    textRectObj.center = (300,75)
    DISPLAYSURF.blit(textSurfaceObj, textRectObj)

    start_rect =  start_button()

    def draw_square_selection(cn):
        clist = [BORDER,BODY,R_ORAN,Y_ORAN,R_TURQ,Y_TURQ,R_PURP,Y_PURP,R_YELL,Y_YELL]
        pygame.draw.rect(DISPLAYSURF, clist[cn*2-2], (240, 215, 70, 70))
        pygame.draw.rect(DISPLAYSURF, clist[cn*2-1], (250, 225, 50, 50))
        return clist[cn*2-2],clist[cn*2-1]

    color_number = 1
    border, body = draw_square_selection(color_number)

    left_triangle = (( 200, 200), (200, 300),(150,250))
    right_triangle = ((350, 200), (350, 300),(400,250))

    pygame.draw.polygon(DISPLAYSURF, RED, left_triangle)
    pygame.draw.polygon(DISPLAYSURF, RED, right_triangle)




    while True:

        for event in pygame.event.get():
            if event.type == pygame.QUIT:
                pygame.quit()
                sys.exit()
            elif event.type == pygame.MOUSEBUTTONDOWN and event.button == 1:  # Check for left mouse button click
                px, py = pygame.mouse.get_pos()
                # Check if the mouse click is within the boundaries of the triangle
                if is_point_inside_triangle(px, py, left_triangle):
                    if color_number > 1:
                        color_number -= 1
                if is_point_inside_triangle(px, py, right_triangle):
                    if color_number < 5:
                        color_number += 1
                draw_square_selection(color_number)

                if start_rect.collidepoint(px,py):
                    return border, body
        border, body = draw_square_selection(color_number)
        pygame.display.update()

menu()
pygame.quit()
            </code>
        </div>
        <p>This creates a simple menu for a game's avatar color selection.</p>
    </div>
</body>
</html>
{% endblock %}


